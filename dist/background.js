(()=>{let e=!1,t=null;const o=e=>{chrome.declarativeNetRequest.updateEnabledRulesets({enableRulesetIds:e?["block_betting_sites"]:[],disableRulesetIds:e?[]:["block_betting_sites"]})};chrome.runtime.onInstalled.addListener((()=>{o(!0)})),chrome.runtime.onStartup.addListener((()=>{chrome.storage.local.get(["timerExpiration"],(e=>{const t=Date.now(),i=e.timerExpiration||0;if(t>=i)o(!0),chrome.storage.local.remove("timerExpiration");else{const e=i-t;o(!1),r(e/1e3)}}))}));const r=r=>{const i=Date.now()+1e3*r;chrome.storage.local.set({timerExpiration:i}),o(!1),e=!0,t&&clearTimeout(t),t=setTimeout((()=>{o(!0),e=!1,chrome.storage.local.remove("timerExpiration")}),1e3*r)};chrome.runtime.onMessage.addListener(((i,a,n)=>{"startTimer"!==i.action||e?"timerExpired"===i.action&&(t&&(clearTimeout(t),t=null),o(!0),e=!1,chrome.storage.local.remove("timerExpiration")):r(i.duration)}))})();